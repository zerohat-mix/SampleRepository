<!DOCTYPE html>
<html >
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <title>Личный кабинет Wikilink</title>

    <link href="common/normalize.css" media="screen" rel="stylesheet" type="text/css">
    <link href="common/application.css" media="screen" rel="stylesheet" type="text/css">
    <script src="common/application.js" type="text/javascript"></script>
    <link href="common/select2.css" media="screen" rel="stylesheet" type="text/css">
    <script src="common/select2.js" type="text/javascript"></script>
    <style type="text/css">
        .tk-museo-sans {
            font-family: "museo-sans", sans-serif;
        }
    </style>
    <style>
        .month button {
            display: inline-block;
            color: #fff;
            background-color: #a94442;
            border-color: #a94442;
            text-decoration: none;
            font-size: 18px;
            width:100px;
            outline: none;
            border-width: 2px 0;
            border-style: solid none;
            border-radius: 4px;
            transition: 0.2s;
        }
        .month button:hover { background-color: #a94442; }
        .month button:active { background-color: #c64b49; }
    </style>

<body class="billing control_panel index">
<div id="container">
    <div id="content">
        <div class="contents">
            <aside id="sidebar">
                <div id="logo-wrapper"> <a id="logo">WikiLink</a> </div>
                <ul>
                    <li class="services"><a href="services.php">Услуги</a></li>
                    <li class="billing"> <a href="billing.php">Деньги</a></li>
                    <li class="bonuses"> <a href="bonuses.php">Бонусы</a></li>
                    <li class="messages"> <a href="messages.php">Сообщения</a></li>
                    <li class="current acts"> <a href="acts.php">Акты</a> </li>
                    <li class="pay"> <a href="pay.php">Оплата</a> </li>
                </ul>
                <div id="current_user">
                    <a data-original-title="ВЫХОД" href="logout.php" data-toggle="tooltip" id="user-logout" title=""><span class="icon">Выход</span></a>
                </div>
            </aside>
            <div id="main">
                <header> <span class="icon"></span>
                    <h1>Акты</h1>
                </header>
                <hr/>
                <div class='month' style='height: 0px' >
                    <button id = '01' style="position:relative; top:5px; left:110px "> Январь </button>
                    <button id = '02' style="position:relative; top:35px; left:6px">Февраль</button>
                    <button id = '03' style="position:relative; top:65px; right:98px">Март</button>
                    <button id = '04' style="position:relative; top:95px; right:202px">Апрель</button>
                    <button id = '05' style="position:relative; top:125px; right:306px">Май</button>
                    <button id = '06' style="position:relative; top:155px; right:410px">Июнь</button>
                    <button id = '07' style="position:relative; top:185px; right:514px">Июль</button>
                    <button id = '08' style="position:relative; top:215px; right:618px">Август</button>
                    <button id = '09' style="position:relative; top:245px; right:722px">Сентябрь</button>
                    <button id = '10' style="position:relative; top:275px; right:826px">Октябрь</button>
                    <button id = '11' style="position:relative; top:305px; right:930px">Ноябрь</button>
                    <button id = '12' style="position:relative; top:335px; right:1034px">Декабрь</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const buttonMonth = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];
    const name = 87000;
    const files = {"2019":{"2":"87000-07.pdf","3":"87000-08.pdf","4":"87000-09.pdf","5":"87000-10.pdf","6":"87000-11.pdf","7":"87000-12.pdf"},"2020":{"2":"87000-01.pdf"}};
    let json = JSON.stringify(files);
    const buttonYear = [2019, 2020];

    for (let i = 0; i < buttonYear.length; i++){
        let newBtn = document.createElement('button');
        newBtn.type = "button";
        newBtn.innerText = String(buttonYear[i]);
        newBtn.id = String(buttonYear[i]) ;
        newBtn.style.cssText = 'display: inline-block;\n' +
            ' text-decoration: none;\n' +
            ' font-size: 17px;\n' +
            'width:100px;\n' +
            ' outline: none;\n' +
            ' border-width: 2px 0;\n' +
            ' border-style: solid none;\n' +
            ' color: #fff;\n' +
            ' background-color: #3c763d;\n' +
            ' border-color: #3c763d;\n' +
            ' border-radius: 4px;\n' +
            ' transition: 0.2s;\n' +
            ' position: relative;' +
            ' margin: 5px;' +
            ' display: block;';
        document.body.appendChild(newBtn);
        year();
    }

    function Create2DArray(quantity) {
        let arr = [];
        for (let i = 0;i < quantity;i++) {
            arr[i] = [];
        }
        return arr;
    }

    let arrayMonth = Create2DArray(buttonYear.length);

    function setArrayName() {
        function getNamePdfFile(point1, point2){
            let array = new Array(12);
            let count = 0;
            for (let i = point1; i < point2; i++){
                if (json[i] === '-'){
                    array[count] = json[i + 1] + json[i + 2];
                    count = count + 1;
                }
            }
            return array;
        }

        let point1 = 0;
        let point2 = 0;
        let count = 0;

        for (let i = 0; i < json.length; i++){
            if (json[i] === ':' && json[i + 1] === '{'){
                point1 = i;
                for (let j = point1; j < json.length; j++){
                    if ((json[j] === '}' && json[j + 1] === ',') || (json[j] === '}' && json[j + 1] === '}')){
                        point2 = j;
                        break;
                    }
                }
                arrayMonth[count] = getNamePdfFile(point1, point2);
                count = count + 1;
            }
        }
    }

    setArrayName();

    function blockingMonth(arrayName, ev) {

        function indexYear(ev){
            for (let i = 0; i < buttonYear.length; i++){
                if (String(buttonYear[i]) === ev){
                    return i;
                }
            }
        }

        let arrayBool = new Array(buttonMonth.length);

        for (let i = 0; i < arrayBool.length; i++){
            arrayBool[i] = false;
        }

        for (let i = 0; i < buttonMonth.length; i++ ){
            for (let j = 0; j < buttonMonth.length; j++){
                if (arrayMonth[indexYear(ev)][i] === buttonMonth[j] ){
                    arrayBool[j] = true;
                }
            }
        }

        for (let i = 0; i < arrayBool.length; i++){
            if (arrayBool[i] === false){
                document.getElementById(buttonMonth[i]).style.background = '#969b96';
                document.getElementById(buttonMonth[i]).disabled = true;
            }else {
                document.getElementById(buttonMonth[i]).style.background = '#a94442';
                document.getElementById(buttonMonth[i]).disabled = false;
            }
        }
    }

    function month(s) {
        document.onclick = function choiceMonth (event) {
            for (let i = 0; i < 12; i++) {
                if (event.target.id === buttonMonth[i] ) {
                    let a = s + name + "-" + buttonMonth[i] + ".pdf";
                    window.open(a);
                    month(s);
                    choiceMonth();
                }else {
                    year(event.target.id);
                }
            }
        }
    }

    function choiceYear(ev) {
        for (let i = 0; i < buttonYear.length; i++){
            document.getElementById(String(buttonYear[i])).style.background = '#3c763d';
        }
        document.getElementById(ev).style.background = '#1ee336';
    }

    function url(ev) {
        for (let i = 0; i < buttonYear.length; i++) {
            if (ev === String(buttonYear[i])) {
                let s = "./" + name + "/" + buttonYear[i] + "/";
                choiceYear(ev);
                blockingMonth(arrayMonth, ev);
                month(s);
            }
        }
    }

    function year(ev) {
        if (ev == null){
            document.onclick = function (event) {
                url(event.target.id);
            }
        }else {
            url(ev);
        }
    }

</script>
</body>
</html>